<div ng-controller="FarmsController" class="farm-search">

  <div class="farm-search-header">
    <label for="filter">Filter By:</label>
    <input type="checkbox" ng-model="view.filter" name="filter" ng-click="view.filterBy(view.filter)">CSA Available
  </div>

  <div class="wrap">
    <div ng-repeat="farm in farms" class="nearby-farm shadow">
      <div class="nearby-farm-main">
        <div class="nearby-farm-title">
          <h1><a href="/farm/details/{{ farm.id }}">{{ farm.name }}</a></h1>
        </div>
        <div class="nearby-farm-quicklook">
          <div class="nearby-farm-available">
            <p>CSA Available?</p>
            <p ng-show="farm.csa_id !== null" style="color: green;">YES</p>
            <p ng-show="farm.csa_id === null" style="color: red;">NO</p>
          </div>
          <p>{{ farm.address }}</p>
        </div>
      </div>
      <img ng-src="{{farm.image_url}}">
    </div>
  </div>

  <div class="wrap"></div>

  <div class="wrap-fixed">
    <div class="zip-search shadow">
      <button ng-click="view.toggle('zip_search')">Search by zip code</button>
      <div ng-show='forms.zip_search'>
        <input type="text" ng-model="view.zipCode" placeholder="12345" autofocus>
      </div>
      <button ng-click="view.farmSearch(view.zipCode)" ng-show="forms.zip_search">Search</button>
      <ui-gmap-google-map center="map.center" zoom="map.zoom" control="map.control" class="desktop-only">
        <ui-gmap-markers models='markers' coords='"coords"'>
        </ui-gmap-markers>
      </ui-gmap-google-map>
    </div>
  </div>

</div>
